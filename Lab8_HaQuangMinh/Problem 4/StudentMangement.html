<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>problem 4</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        .frame-1 {
            border: 1px solid black;

        }

        .frame-2 {
            border: 1px solid black;
            margin-left: 25px;
            width: 800px;
        }

        .content-10 {
            border: 1px solid black;
            margin-top: 5px;
            background-color: antiquewhite;
        }

        .content-11 {
            background-color: aquamarine;

        }

        input {
            width: 100px;
        }

        .important {
            border: 1px solid black;
        }

        .Parent-down {
            margin-top: 90px;
        }
    </style>





</head>

<body>
    <div>
        <h1> Student Management System</h1>
    </div>


    <div class="row">
        <div class="frame-1 col-md-3">
            <h2> Class List </h2>

            <ul>
                <li> Lớp 1 </li>
                <li> Lớp 2 </li>

            </ul>

        </div>

        <div class="frame-2 col-md-8">
            <div class="Parent-up">

                <p class="content-10"> Edit student's information</p>

                <div class="important container-fluid">
                    <div class="row">
                        <div class="col-md-2">
                            <input type="number">
                        </div>

                        <div class="col-md-3">
                            <input type="name">
                        </div>

                        <div class="col-md-3">
                            <input type="email">
                        </div>

                        <div class="col-md-3">
                            <select class="form-select" id="classSelect" aria-label="Default select example">
                                <option selected>Open this select menu</option>
                                <option value="1"> Lớp 1 </option>
                                <option value="2"> Lớp 2 </option>
                                <option value="3"> Lớp 3 </option>
                                <option value="3"> Lớp 4 </option>
                            </select>
                        </div>

                        <div class="col-md-1">
                            <div class="updated">
                                <button id="btnUpdate" type="button" class="btn btn-primary"> Update </button>

                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="Parent-down">

                <p class="content-11"> Student List </p>

                <div class="content-important">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Full Name</th>
                                <th scope="col"> Student ID </th>
                                <th scope="col"> Function </th>
                            </tr>
                        </thead>
                        <tbody id="studentTableBody">
                            <tr>
                                <!-- <th scope="row">1</th>
                                <td>Mark</td>
                                <td>2230</td>
                                <td>
                                    <button type="button" class="btn btn-primary"> Edit </button>
                                    <button type="button" class="btn btn-primary"> Delete </button> -->
                                </td>
                            </tr>
                            <tr>
                                <!-- <th scope="row">2</th>
                                <td>Đoàn Văn B</td>
                                <td> 2227 </td>
                                <td>
                                    <button type="button" class="btn btn-primary"> Edit </button>
                                    <button type="button" class="btn btn-primary"> Delete </button>
                                </td> -->
                            </tr>
                            <tr>
                                <!-- <th scope="row">3</th>
                                <td> Đỗ thị C </th>
                                <td> 2219 </td>
                                <td>
                                    <button type="button" class="btn btn-primary"> Edit </button>
                                    <button type="button" class="btn btn-primary"> Delete </button>
                                </td> -->
                            </tr>
                        </tbody>
                    </table>

                </div>


            </div>

        </div>

    </div>


    <script src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        // $(document).ready(function () {
        //     let StudentList,ClassList;
        //     $.get(
        //         "http://139.180.213.49/getdata-student.php", {
        //             Type: "Student"  
        //         },
        //         function (data) {
        //             StudentList = data;
        //   //          printStudentList[StudentList]  
        //             console.log(StudentList);
        //         }, "json"
        //     );
        //     $.get(
        //         "http://139.180.213.49/getdata-student.php", {
        //             Type: "Class"  
        //         },
        //         function (data) {
        //             ClassList = data;
        //   //          printStudentList[StudentList]  
        //             console.log(ClassList);
        //         }, "json"
        //     );
        // });
        // fetch students and populate student table

        $(document).ready(function () {
            // Function to clear student table
            function clearStudentTable() {
                $(`#studentTableBody`).empty();
            }

            $.get(
                "http://139.180.213.49/getdata-student.php?Type=Student",
                {
                    ID: "1",
                    Name: " Nguyễn Hải",
                    Email: "anh.nguyen@gmail.com",
                    Class: "Class 2 ",
                },
                function (StudentList) {
                    clearStudentTable(); // Clear existing student table data 
                    let $studentTableBody = $(`#studentTableBody`);
                    StudentList.forEach(function (student, index) {
                        $studentTableBody.append(`
                        <tr>
                            <th scope="row"> ${index + 1}</th>
                            <td> ${student.Name} </td>
                            <td> ${student.Email} </td>
                            <td> 
                                <button type="button" class="btn btn-primary"> Edit </button>
                                <button type="button" class="btn btn-primary"> Delete </button>
                            </td>
                        </tr>        
                    `);
                    });
                },
                "json"
            )
        });

        function addStudentToTable (studentID, studentName, studentEmail, studentClass ) {
            // Append new row to the table 
            let newRow = `
                <tr>
                    <td> ${studentID} </td>
                    <td> ${studentName} </td>
                    <td> ${studentEmail} </td>

                    <td> 
                        <button type="button" class="btn btn-primary"> Edit </button>
                        <button type="button" class="btn btn-primary">Delete</button>
                    </td>
                </tr>     
            `;

            $(`#studentTableBody`).prepend(newRow);
        }
        function addStudent() {
            console.log("Add student function is called");

            // Get input values 
            const studentID = $(`#studentID`).val();
            const studentName = $(`#studentName`).val();
            const studentEmail = $(`#studentEmail`).val();
            const studentClass = $(`#classSelect`).val();

            if(studentID === "|| studentName ===" || studentEmail === "|| studentClass ===") {
                alert(`Please fill in all fields`);
                return;
            }

            addStudentToTable(studentID, studentName, studentEmail, studentClass) {

                // clear input fields after adding the student 
                $(`#studentID`).val(``);
                $(`#studentName`).val(``);
                $(`#studentEmail`).val(``);
                $(`#classSelect`).val(``);
            }

            $(`#submit-button`).on(`click`, function() {
                addStudent();
            });

        }

       


    </script>


</body>

</html>